server {
	listen 80;
	server_name *.ssc;

	root /var/www/$host;
	index index.php index.html index.htm;

	access_log /var/www/log/nginx.ssc.access.log;
	error_log /var/www/log/nginx.ssc.error.log;

	location / {
		# include the proxy-settings needed for apache
		include proxy_params;

		# If a .htaccess-file exists this host should maybe run in apache2
		set $run_apache 0;
		if (-f $document_root/.htaccess) {
			set $run_apache 1;
		}

		# If a .nginx-file exists this host must not run in apache2
		if (-f $document_root/.nginx) {
			set $run_apache 0;
		}

		# Pass the request to apache2 if wanted and break.
		if ($run_apache = 1) {
			proxy_pass http://127.0.0.1:8080;
			break;
		}

		# serve exising files, directories and symlinks directly
		if (-e $request_filename) {
			break;
		}

		# if it does not exist, pass it on to TYPO3
		rewrite .* /index.php last;
	}

	location ~ \.php($|/) {
		fastcgi_pass 127.0.0.1:9000;
		include fastcgi_params;
		fastcgi_param  SCRIPT_FILENAME  /var/www/$host/$fastcgi_script_name;
	}
}
